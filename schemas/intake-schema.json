{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CaseIntake",
  "type": "object",
  "properties": {
    "clientType": { "type": ["string", "null"], "enum": ["existing", "new", "unknown", null] },
    "fullName": { "type": ["string", "null"], "minLength": 3 },
    "phone": { "type": ["string", "null"], "pattern": "^[0-9\\-\\+\\(\\)\\s\\.]{7,}$" },
    "email": { "type": ["string", "null"], "format": "email" },
    "incidentDescription": { "type": ["string", "null"], "minLength": 6 },
    "incidentDate": { "type": ["string", "null"], "format": "date" },
    "incidentLocation": { "type": ["string", "null"], "minLength": 2 },
    "meta": {
      "type": "object",
      "properties": {
        "transcriptHash": { "type": ["string", "null"] },
        "callStartedAt": { "type": ["string", "null"], "format": "date-time" },
        "callEndedAt": { "type": ["string", "null"], "format": "date-time" },
        "source": { "type": "string", "enum": ["live-call", "post-call"] }
      },
      "required": ["source"],
      "additionalProperties": false
    },
    "confidence": {
      "type": "object",
      "additionalProperties": { "type": "number", "minimum": 0, "maximum": 1 }
    },
    "sourceUtterances": {
      "type": "object",
      "additionalProperties": {
        "type": "array",
        "items": { "type": "string" }
      }
    }
  },
  "required": ["clientType", "meta", "confidence", "sourceUtterances"],
  "additionalProperties": false
}
